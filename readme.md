# MFC目标识别标注工具

* 本工程生成的软件需要依赖21cls.txt 和 21cls_English.txt和set.json三个配置文件，这三个配置文件都应该和ImageSnap.exe在同一个路径下。

* 所有第三方库：

    ``` 
    opencv = 2.4.9
    jsoncpp >= 1.8.4
    ```

## 21cls.txt

* 该文件为中文label，每一行一个label名称，不需要label序号，编码格式为`ANSI`

    ```
    小轿车
    行人
    公交车
    自行车
    ...
    ..
    ```

## 21cls_English.txt
* 该文件为英文label，每一行一个label名称，不需要label序号：

    ```
    car
    person
    bus
    bike
    ...
    ..
    ```

## set.json
* 该文件为子标签属性配置文件，编码格式`ANSI`

    ```js
    {
        "person"://person标签子属性列表
        {
            "gender"://属性1性别
            [
                "男",
                "女"
            ],
            "age"://属性2年龄
            [
                "10",
                "20",
			    "30",
			    "40",
			    "50"
            ],
            "EnToZh"://汉化
            {
		        "gender":"性别",
		        "age":"年龄"
		    }
        },
        "image"://图像级标签属性设置
        {
		    "weather"://属性1
            [
			    "sunshine",
			    "rain",
			    "snow",
			    "cloudy"
		    ],
		    "road"://属性2
            [
			    "E-road",
			    "U-road"
		    ],
		    "EnToZh"://属性1,2,3...的汉化
            {
		        "weather":"天气",
		        "road":"道路"
		    }
	    }
    }
    ```

## 使用说明

    1. 进入软件选择，文件--打开--选择需要标注的图片，程序将自动载入和所选图片所在一个目录的其他图片。

    2. 选择标注模式（矩形，多边形，曲线）。
        1) 矩形标注模式，鼠标左键拖动画出方框，，鼠标右键确定方框呼出详细的标注面板，选择后按确定结束一个目标的标注工作，鼠标放到矩形角点，出现十字标志，点击鼠标左键拖动可以改变方框形状，按住ctrl键点击方框任意角点可以删除当前方框。
        2) 多边形模型，鼠标点击选择多边形角点，点击第一个点封闭图像，鼠标放到多边形角点，出现十字标志，点击鼠标左键拖动可以改变多边形形状，按住ctrl键点击任意角点可以删除当前多边形。
        3) 曲线模式，鼠标点击后拖动选择曲线锚点方向和长度，鼠标放到红色核心点位置出现问号标志，点击左键删除一个锚点。
        4) 在曲线模式和多边形模式，退格键删除上一步画的点。
        5) 上下键切换不同图片，切换时自动保存，中途保存快捷键ctrl+s。

    3. 按需要选择图片标签，和载入模式（继承上一张开启后，切换到下一张图片时不会清除上一张图的标注结果，适合视频连续标注）。

    4. 标注结果自动保存在根目录下data文件夹，以两种格式文件保存，xml格式文件按照VOC2007的数据格式，只能保存矩形标注模式标注的数据。json格式文件保存矩形，多边形，曲线多种标注模式数据。